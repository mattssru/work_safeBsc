<?php header("Content-Type: text/html; charset=utf-8"); $btnLogin = '<button type="button" class="my-auto btn btn-outline-secondary rounded-pill btn-sm" data-toggle="modal" data-target="#modalLogin"> <i class="fas fa-login"></i> '.$lg->text[3].' </button>'; if(isset($_SESSION['ses_login_accToken_val']) && $_SESSION['ses_login_userData_val']!=""){ $lineUser = json_decode($_SESSION['ses_login_userData_val'],true); if(!empty($lineUser['name'])){ $btnLogin = ' <div class="dropdown align-self-center"> <button id="dropdownProfile" class="btn btn-outline-secondary btn-sm my-auto rounded-pill dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" > '.$lineUser['name'].' </button> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownProfile"> <a class="dropdown-item" href="#"> <div class="media d-flex align-items-center"> <img style="width: 50px; height: 50px;" class="rounded-pill mr-3" src="'.$lineUser['picture'].'" alt="'.$lg->text[4].'" onerror="this.onerror=null;this.src=\'../maps/dist/icons/icons8-user-64.png\';"> <div class="media-body"> <h6 class="mt-0">'.$lineUser['name'].'</h6> </div> </div> </a> <a class="dropdown-item" href="manage?'.PHP::current_url($lang).'"> <button type="button" class="btn btn-sm btn-light w-100">'.$lg->text[32].'</button> </a> <div class="dropdown-divider"></div> <a class="dropdown-item text-center" href="./home?'.PHP::current_url($lang).'"><i class="fas fa-home"></i> '.$lg->text[34].'</a> <a class="dropdown-item text-center" href="./?'.PHP::current_url($lang).'"><i class="fas fa-map-marked-alt"></i> '.$lg->text[56].'</a> <div class="dropdown-divider"></div> <a class="dropdown-item text-center text-muted" href="logout"><i class="fas fa-power-off"></i> '.$lg->text[33].'</a> </div> </div>'; } /*#name #picture #sub = user_id*/ } ?>
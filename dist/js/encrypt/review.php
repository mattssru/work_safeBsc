<?php require('./app/sessions/start.php'); require_once('../maps/app/database/connect.php'); /*PHP::showError();*/ PHP::referer(); require_once('app/controllers/langController.php'); require_once('../maps/app/controllers/viewController.php'); require_once('../maps/app/controllers/mapsController.php'); require_once('../kyc/store/controllers_food.php'); require_once('../maps/app/controllers/config.php'); /*echo PHP::current_url()['lang'];*/ $db = new ConnectDB(); $conn = $db->connect(); $lang = isset($_GET['lang']) ? $_GET['lang'] : 'en'; $lg = new lang($lang); $view = new viewController(); $counter = $view->view()['data']; $map = new mapController(); require('app/sessions/view.php'); /*keep code view html login or not login*/ require('app/sessions/checklogin.php'); /* check login */ $user_id = $map->en($lineUser['sub']); $data_id = isset($_REQUEST['id']) ? intval(base64_decode($map->de($_REQUEST['id']))) : 0; if($data_id == 0){ include('error/404.php'); exit(); } $datacontent = $map->getContentFistOne($data_id,$lg)[0]; $imagetopic = ''; if(!empty($datacontent['image'])){ foreach($datacontent['image'] as $key => $value){ if($key == 0){ $imagetopic=' <a class="" data-fancybox="reviewimage" data-caption="'.$datacontent['shop_name'].'" href="'.$pathimage.'/'.$value.'"> <img class="review-image" src="'.$pathimage.'/'.$value.'" alt="'.$lg->text[4].'"> </a>'; } else{ $imagetopic.=' <a class="" data-fancybox="reviewimage" data-caption="'.$datacontent['shop_name'].'" href="'.$pathimage.'/'.$value.'" style="display: none;"></a>'; } } } else{ echo "not ok"; } ?> <!DOCTYPE html> <html lang="en"> <head> <!-- Required meta tags --> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png"> <link rel="manifest" href="favicon/site.webmanifest"> <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#000000"> <link rel="shortcut icon" href="favicon/favicon.ico"> <meta name="msapplication-TileColor" content="#ffc40d"> <meta name="msapplication-config" content="favicon/browserconfig.xml"> <meta name="theme-color" content="#ffffff"> <!-- Bootstrap CSS --> <link rel="stylesheet" href="dist/bootstrap/bootstrap.min.css" /> <link rel="stylesheet" href="dist/fonts/font-kanit/font.kanit.css" /> <link rel="stylesheet" href="dist/fonts/fontawesome-free/css/all.min.css" /> <link rel="stylesheet" href="plugins/ol-v6.5.0-dist/ol.css" /> <link rel="stylesheet" href="dist/owl/owl.carousel.min.css" /> <link rel="stylesheet" href="dist/css/main.min.css?v=<?=filemtime('dist/css/main.min.css');?>"> <link rel="stylesheet" href="dist/plugins/fancybox/jquery.fancybox.css" /> <link rel="stylesheet" href="./dist/css/star.css"> <link rel="stylesheet" href="./dist/jquery.confirm/jquery.confirm.css" /> </head> <?include('layers/analytic.php');?> <title><?=$lg->text[4];?> Review</title> <style> .card-horizontal { display: flex; flex: 1 1 auto; } .pictureUrl{ width: 50px; height: 50px; border-radius: 50%; } .box-history{ display: none; } .alert{ position: fixed; top: 10px; right: 10px; z-index: 9999; display: none; } </style> </head> <body> <div class="container-fluid px-0 border-bottom mb-0 mb-sm-5 shadow"><?php include('layers/nav.php');?></div> <div class="container-fluid"> <div class="row justify-content-center"> <main role="main" class="col-12 col-sm-8 p-0"> <a href="./?<?=PHP::current_url($lang);?>"><button type="button" class="btn btn-sm btn-secondary mb-2 ml-3 ml-sm-0 mobile-btn-back"><i class="fas fa-long-arrow-alt-left"></i> <?=$lg->text[14];?></button></a> <div class="card"> <div class="card-horizontal"> <div class="img-square-wrapper"> <?=$imagetopic;?> </div> <div class="card-body"> <h4 class="card-title d-block text-truncate mb-0" style="max-width: 320px;"><?=$datacontent['shop_name'];?></h4> <div class="d-inline-block"> <p class="badge badge-danger rounded-pill"> <?=$datacontent['rating'];?> <i class="fas fa-star"></i> </p> (<?=$datacontent['countrate'];?> รีวิว) </div> <p class="card-text mb-0"><?=$datacontent['shop_detail'];?></p> <p class="card-text"><?=$datacontent['open'];?></p> </div> </div> </div> <div class="my-3 bg-white rounded viewlogin"> <form id="form-comment" method="POST"enctype="multipart/form-data"> <input type="hidden" name="data_id" id="data_id" value="<?=$data_id;?>"> <div class="card"> <div class="card-header bg-white"> <h6 class="card-title"> <?=$lg->text[21];?> </h6> </div> <div class="card-body"> <h5 class="text-center w-100"><?=$lg->text[22];?></h5> <div class="starrating risingstar d-flex justify-content-center flex-row-reverse"> <input type="radio" id="star5" name="rate" value="5" /><label for="star5" title="5 star"></label> <input type="radio" id="star4" name="rate" value="4" /><label for="star4" title="4 star"></label> <input type="radio" id="star3" name="rate" value="3" /><label for="star3" title="3 star"></label> <input type="radio" id="star2" name="rate" value="2" /><label for="star2" title="2 star"></label> <input type="radio" id="star1" name="rate" value="1" /><label for="star1" title="1 star"></label> </div> <div class="form-group"> <label class="text-muted"><?=$lg->text[23];?> <i class="fas fa-info-circle text-muted"></i></label> <input type="text" name="topic" id="topic" class="form-control"> </div> <div class="form-group"> <label class="text-muted"><?=$lg->text[24];?> <i class="fas fa-info-circle text-muted"></i></label> <textarea id="comment" name="comment" class="form-control bg-light" rows="5" placeholder="<?=$lg->text[25];?>"></textarea> </div> <div class="input-group mb-3"> <div class="custom-file"> <input type="file" class="custom-file-input" id="upfile" name="upfile[]" multiple> <label class="custom-file-label" for="inputGroupFile01"><?=$lg->text[31];?></label> </div> </div> <div class="row" id="gallery-image"></div> </div> <div class="card-body"> <button type="submit" id="submit-btn" disabled class="btn btn-primary float-right"><?=$lg->text[26];?></button> <button type="button" id="submit-spinner" style="display: none;" disabled class="btn btn-primary float-right"><i class="fas fa-spinner fa-spin"></i> <?=$lg->text[26];?></button> </div> </div> </form> </div> <div class="my-3 p-0 rounded shadow-sm box-history" id="history"></div> </main> <template id="main-box-img"> <div class="col-lg-4 col-sm-6 position-relative mb-3 dummy-upfile"> <div class="thumbnail img-responsive border p-1"> <a href="#" title="Image 1" class="box-img"></a> </div> </div> </template> <div class="alert alert-success" id="success-alert"> <button type="button" class="close" data-dismiss="alert">x</button> <strong><i class="fas fa-bell"></i> Success! </strong> <p>Comment are saved.</p> </div> </div> </div> <input type="hidden" id="userId" value="<?=$user_id;?>"/> <input type="hidden" id="lang" value="<?=$lang;?>"> <input type="hidden" id="alert" value="<?=$lg->text[27];?>"> <input type="hidden" id="confirm" value="<?=$lg->text[29];?>"> <input type="hidden" id="required" value="<?=$lg->text[30];?>"> <input type="hidden" id="warning" value="<?=$lg->text[28];?>"> <!-- Optional JavaScript --> <!-- jQuery first, then Popper.js, then Bootstrap JS --> <script src="dist/jquery/jquery-3.3.1.min.js?v=001"></script> <script src="dist/bootstrap/popper.min.js"></script> <script src="dist/bootstrap/bootstrap.min.js"></script> <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script> <script src="plugins/ol-v6.5.0-dist/ol.js"></script> <script src="dist/owl/owl.carousel.min.js"></script> <script src="dist/plugins/fancybox/jquery.fancybox.js"></script> <!-- Datatable --> <script src="dist/plugins/datatables/jquery.dataTables.min.js"></script> <script src="dist/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script> <script src="dist/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script> <script src="dist/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script> <script src="dist/js/4937a09651c738450070200ac0669afb.js"></script> <script src="./dist/jquery.confirm/jquery.confirm.js"></script> <script src="dist/js/review.js?v=<?=filemtime('dist/js/review.js');?>"></script> <script> $(document).ready(function(){ $("[data-fancybox]").fancybox(); }); </script> </body> </html>
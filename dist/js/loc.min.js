
$(document).ready(async function(){

    async function getLocation(){
        if (navigator.geolocation){
            navigator.geolocation.getCurrentPosition(showPosition,showError);
        }
        else{
            $.info({content: "Geolocation is not supported by this browser."});
        }
        $.loader();
    }

    async function showPosition(position){
        
        let lat=position.coords.latitude;
        let lon=position.coords.longitude;
        $('#lat').val(lat);
        $('#lng').val(lon);
        await aroundLocation({lat: lat , lng: lon});

    }

    async function showError(error){
        switch(error.code){
            case error.PERMISSION_DENIED:
                $.info({content: "User denied the request for Geolocation."});
            break;
            case error.POSITION_UNAVAILABLE:
                $.info({content: "Location information is unavailable."});
            break;
            case error.TIMEOUT:
                $.info({content: "The request to get user location timed out."});
            break;
            case error.UNKNOWN_ERROR:
                $.info({content: "An unknown error occurred."});
            break;
        }
    }
});